
---

#network #language/c #socket_programming #linux/system_call

*select*

---

select 함수를 이용하는 것이 멀티 플렉싱 서버의 구현에 있어서 가장 대표적인 방법이다. 그리고 윈도우에서도 이와 동일한 이름으로 동일한 기능을 제공하는 함수가 있기 때문에 이식성에 있어서도 좋은 점수를 줄 수 있다.

# select 함수의 기능

select 함수를 사용하면 하나의 구조체에 여러 개의 파일 디스크립터를 모아놓고 동시에 이들을 관찰할 수 있다. 이때 관찰할 수 있는 항목은 다음과 같다. ^9974c7

- 수신한 데이터를 가지고 있는 소켓이 존재하는가?
- 블로킹되지 않고 데이터의 전송이 가능한 소켓은 무엇인가?
- 예외상황이 발생한 소켓은 무엇인가?

> ## 관찰항목 각각을 가리켜 ==이벤트(event)==라고 한다.
> 관찰항목 각각을 가리켜 이벤트라 하고, 관찰 항목에 속하는 상황이 발생했을 때, '이벤트(event)가 발생했다'라고 표현한다. 이는 매우 일반적인 표현이기 때문에 여러분도 이 표현에 익숙해질 필요가 있다.

# select 함수의 호출 순서

select 함수의 호출 순서를 전체적으로 정리하면 아래와 같다.

1. 파일 디스크립터의 설정
2. 검사의 범위 설정
3. 타임아웃의 설정
4. select 함수의 호출
5. 호출 결과 확인

## 파일 디스크립터의 설정

select 함수를 사용하면 여러 개의 파일 디스크립터를 동시에 관찰할 수 있다.
파일 디스크립터의 관찰은 소켓의 관찰로 해석할 수 있다.

그렇다면 먼저 관찰하고자 하는 파일 디스크립터를 모아야 한다.
모을 때도, 관찰항목(수신, 전송, 예외)에 따라 모아야 한다.
즉, 바로 [[select#^9974c7 | 위]]에서 언급한 세가지 관찰 항목별로 구분해서 세 묶음으로 모아야 한다.

파일 디스크립터를 세 묶음으로 모을 때 사용되는 것이 fd_set형 변수이다. 즉, 다음 그림에서 보이듯이 0과 1로 표현되는, 비트 다

---

참고자료

#

---