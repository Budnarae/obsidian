
---

#network #c #socket_programming #linux

*tcp socket*

---

#### TCP 소켓에 존재하는 입출력 버퍼

[[소켓의 타입]]에서 설명하였듯이, [[TCP]] 소켓에는 데이터의 경계라는 개념이 존재하지 않는다. 데이터의 경계가 존재하지 않는다는 것은 TCP 프로토콜이 자의적으로 다음의 동작을 수행할 수 있음을 의미한다.

1. 한 번에 대량의 데이터를 write() 할 때, 여러 개의 작은 단위로 쪼개 나누어 송신할 수 있다.
2. 여러 번 소량의 데이터를 write() 할 때, 하나의 큰 단위로 합쳐 한 번에 송신할 수 있다.

이것이 가능한 이유는 read(), write()가 호출되는 즉시 데이터가 송수신되는 것이 아니기 때문이다. TCP 소켓에는 입출력 버퍼가 존재하며, 소켓을 대상으로 read(), write()가 호출되면 아래와 같이 동작한다.

- write()의 경우 : 데이터를 출력 버퍼로 전달 후, 상황에 맞게 적절히(한번에 보내든 나눠서 보내든) 데이터를 상대방의 입력 버퍼로 전송한다.
- read()의 경우 : 입력 버퍼에 저장된 데이터를 읽어들인다.

![[tcp 소켓의 입출력 버퍼.png]]

또한 TCP 소켓의 입출력 버퍼는 아래와 같은 특성을 지닌다.

1. 입출력 버퍼는 TCP 소켓 각각에 대해 별도로 존재한다.
2. 입출력 버퍼는 소켓 생성 시 자동으로 생성한다.
3. 소켓을 닫아도 출력 버퍼에 남아있는 데이터는 계속해서 전송이 이뤄진다.
4. 소켓을 닫으면 입력 버퍼에 남아있는 데이터는 소멸되어 버린다.

#### 슬라이딩 윈도우(Sliding Window) 프로토콜

입출력 버퍼의 존재를 알았으니, 다음과 같은 상황을 가정해볼 수 있다.

*클라이언트의 입력 버퍼의 크기보다 큰 데이터를 서버 측에서 전송하였다.*

위와 같은 상황이 발생하며 버퍼 크기의 초과분만큼 데이터가 

---

참고자료

#참고도서/윤성우의_열혈_TCP_IP_소켓_프로그래밍

---