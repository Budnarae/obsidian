
---

#network #c #socket_programming #linux

*type*

---

[[socket | 소켓]]의 [[프로토콜 체계]]를 결정한 후에는, 해당 프로토콜 체계 내에서 어떠한 방식으로 데이터를 전송할 것인지 결정해야 한다. 예를 들어서 **PF_INET**에 해당하는 프로토콜 체계에는 둘 이상의 데이터 전송방식이 존재한다.

|              type              |               설명                |
|:------------------------------:|:---------------------------------:|
|  연결지향형 소켓(SOCK_STREAM)  | [[TCP]] 방식으로 연결을 지원한다. |
| 비 연결지향형 소켓(SOCK_DGRAM) | [[UDP]] 방식으로 연결을 지원한다. |

#### 연결지향형 소켓(SOCK_STREAM)

연결 지향형 소켓은 TCP 방식으로 연결을 지원하며 특징은 아래와 같다.

1. 중간에 데이터가 소멸되지 않고 목적지로 전송된다.
2. 전송 순서대로 데이터가 수신된다.
3. ==전송되는 데이터의 경계(Boundary)가 존재하지 않는다(중요)==
4. ==소켓 대 소켓의 연결은 반드시 1대 1이어야 한다.==

1, 2번의 특성은 우리가 익히 알던 TCP의 특성이다. 그리고 4번은 그리 이해하기 어렵지 않다. 그러므로 3번에 대해 좀 더 자세히 알아보자.

데이터를 송수신하는 소켓은 내부적으로 버퍼(buffer), 쉽게 말해서 바이트 배열을 지니고 있다. 그리고 소켓을 통해 전송되는 데이터는 일단 이 배령에 저장된다. 때문에 데이터가 수신되었다고 해서 바로 read()를 통해 호출해야 하는 것은 아니다. 버퍼의 용량을 초과하지 않는 한, 여러 번에 걸쳐 데이터가 채워진 후에 한 번의 read() 호출을 통해서 데이터 전부를 읽어 들일수도 있고, 반대로 한번의 write() 호출로 전송된 데이터를 여러 번의 read() 호출을 통해 읽어들일 수도 있다. 즉, read()의 호출횟수와 write() 함수의 호출횟수는 연결지향형 소켓의 경우 큰 의미를 갖지 못한다. 때문에 연결지향형 소켓은 데이터의 경계가 존재하지 않는다고 말하는 것이다.

#### 비 연결지향형 소켓(SOCK_DGRAM)



---

참고자료

[윤성우의 열혈 TCP/IP 소켓 프로그래밍](https://product.kyobobook.co.kr/detail/S000001589146)

---