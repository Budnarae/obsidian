
---

#asynchronism 

_Deadlock_

---

# 교착 상태란

프로세스나 스레드가 결코 일어날 수 없는 특정 이벤트를 기다리는 것.
시스템 측면에서 자원의 요구가 뒤엉킨 상태.

구체적으로는 블록된 프로세스 집합의 각 프로세스가 하나의 자원을 소유holding하면서 그 집합에 있는 다른 프로세스가 소유하고 있는 자원의 획득을 기다리고 있는 상태.

대부분의 교착 상태는 전용 자원을 차지하려는 경쟁에서 발생한다.
**순환 대기**는 교착 상태에 있는 시스템의 특징이다.

# 교착 상태가 성립되기 위한 네 가지 필요조건

다음 네 가지 조건이 동시에 발생할 때, 즉 필요충분조건이 성립될 때 발생한다.

## 상호 배제 조건

자원은 한 번에 한 프로세스만 점유할 수 있다.
사용 중인 자원을 다른 프로세스가 사용하려면 요청한 자원이 해체될 때까지 대기해야 한다.

## 점유와 대기 조건

배타적으로 자원을 회득한 프로세스가 다른 자원을 얻으려고 대기해야 한다.

## 비선점 조건

프로세스가 자원을 확보하면,  자원을 모두 사용할 때까지 시스템이 프로세스의 제어를 빼앗을 수 없다(자원은 선점될 수 없다).

## 순환대기 조건

두 프로세스 이상이 순환대기해야 한다.
순환대기란, 둘 이상의 프로세스가 어떤 자원을 소유하기 위해 블록에 빠져있고, 그 자원을 소유하고 있는 프로세스 또한 어떤 자원을 소유하기 위해 블록에 빠져있는 상태를 말한다.

# 교착 상태 방지를 위한 4가지 방법

## 교착 상태 방지(예방)

4가지 교착 상태 조건 중 하나라도 발생하지 않도록 한다.

### 상호배제 조건은 거부할 수 없다.

상호배제 조건을 거부하면 데이터 경쟁의 위험이 있기 때문이다.

### 점유와 대기 조건 거부

==최대 자원 할당==
프로세스가 작업을 수행하기 전에 필요한 모든 자원을 요청하고 획득해야 한다.
보류 상태에서는 프로세스가 자원을 점유할 수 없으므로 대기 조건이 성립되지 않는다.

자원의 효율성이 낮다는 단점이 있다. 많은 자원이 사용되지 않으면서 오랜 시간 할당되기 때문이다.

### 비선점 조건 거부

자원을 보유한 프로세스는 추가적인 자원 요청을 할 수 없다.
해당 프로세스는 일단 보유한 자원을 반납한 후 추가로 필요한 자원과 함께 한꺼번에 다시 요청해야 한다(시스템에 의해 선점 당하게 됨).

프로세스가 재시작되어야 하는 추가적인 부하가 발생한다.

### 순